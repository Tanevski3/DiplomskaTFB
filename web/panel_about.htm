<!DOCTYPE html>
<!-- web/panel.htm -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Admin panel</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }

      @media (max-width: 980px) {
        /* Enable use of floated navbar text */
        .navbar-text.pull-right {
          float: none;
          padding-left: 5px;
          padding-right: 5px;
        }
      }
      .blu_row{
	  background-color:#0075B0;
	  color: white;
	  }
	   tbody tr {
	     cursor: pointer;
		}
    #save_btn{
      display: hidden;
    }

    </style>
    <link href="http://127.0.0.1:4040/css/bootstrap-responsive.min.css" rel="stylesheet">

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://getbootstrap.com/2.3.2/assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://getbootstrap.com/2.3.2/assets/ico/apple-touch-icon-114-precomposed.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://getbootstrap.com/2.3.2/assets/ico/apple-touch-icon-72-precomposed.png">
                    <link rel="apple-touch-icon-precomposed" href="http://getbootstrap.com/2.3.2/assets/ico/apple-touch-icon-57-precomposed.png">
                                   <link rel="shortcut icon" href="http://getbootstrap.com/2.3.2/assets/ico/favicon.png">
  <meta name="chromesniffer" id="chromesniffer_meta" content="{}"><script type="text/javascript" src="chrome-extension://homgcnaoacgigpkkljjjekpignblkeae/detector.js"></script><meta name="chromesniffer" id="chromesniffer_meta"><script type="text/javascript" src="chrome-extension://homgcnaoacgigpkkljjjekpignblkeae/detector.js"></script><style>[touch-action="none"]{ -ms-touch-action: none; touch-action: none; }[touch-action="pan-x"]{ -ms-touch-action: pan-x; touch-action: pan-x; }[touch-action="pan-y"]{ -ms-touch-action: pan-y; touch-action: pan-y; }[touch-action="scroll"],[touch-action="pan-x pan-y"],[touch-action="pan-y pan-x"]{ -ms-touch-action: pan-x pan-y; touch-action: pan-x pan-y; }</style></head>

  <body cz-shortcut-listen="true" style="">

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="panel.htm">Logged in as {{
                out(user.firstName);  }}
              </a>
          <div class="nav-collapse collapse">
              <form class="navbar-text pull-right" action="admin.htm"  method="post" style="margin:0px;padding:0px;">
                <button name="logout" type="submit" class="btn btn-link" style="color:white;">Logout</button>
            </form>
            
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
              
      <div class="row-fluid">
        <div class="span3">
          <div class="well sidebar-nav">
            <ul class="nav nav-list" >
              <li class="nav-header">Dashboard</li>
              <li id="nav_users" ><a href="panel_users.htm">Users</a></li>
              <li id="nav_items"><a href="panel_items.htm">Items</a></li>
              <li id="nav_categories"><a href="panel_categories.htm">Categories</a></li>
              <li class="active" id="nav_about"><a href="panel_about.htm">About</a></li>
            </ul>
          </div><!--/.well -->
        </div><!--/span-->
        <script type="text/javascript"> 

        </script>
        <div class="span9">
		<br>

		<p></p>   

        <form id="about_form" data-rev="{{ out(about._rev); }}" >
          <label for="address_input">Address:</label> <input required id="address_input" type="text" placeholder="Enter address..." {{ out('value="' + about.address + '" >'); }}
          <label for="description_input">Description:</label> <textarea rows="5" columns="10" id="description_input" type="text" placeholder="Enter your family name..."> {{ out(about.description); }}</textarea>
          <label for="email_input">Email:</label> <input required min="3" id="email_input" type="text" placeholder="Email goes here..." {{ out('value="' + about.email + '" >'); }}
          <label for="fax_input">Fax:</label> <input required min="3" id="fax_input" type="text" placeholder="Fax..." {{ out('value="' + about.fax + '" >'); }}
          <label for="phone_input">Phone:</label> <input required min="3" id="phone_input" type="text" placeholder="Phone..." {{ out('value="' + about.phone + '" >'); }} <br><br>
                    <button id="save_btn" class="btn btn-primary">Save changes</button>
          </form>

<div class="alert alert-error" style="display:none;" >
  <button type="button" class="close" data-dismiss="alert">×</button>
  <strong>Warning!</strong> Best check yo self, you're not looking too good.
</div>

<div class="alert alert-info" style="display:none;" >
  <button type="button" class="close" data-dismiss="alert">×</button>
  <strong>Heads up!</strong> This alert needs your attention, but it's not super important.
</div>

<div class="alert alert-success" style="display:none;" >
  <button type="button" class="close" data-dismiss="alert">×</button>
  <strong>Well done!</strong> You successfully read this important alert message.
</div>
         
    <div id="sure_modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="sure_modal_label" aria-hidden="true" style="display: none;">
        <div class="modal-body">
          <p>Are you sure you want to update about?</p>
        </div>
        <div class="modal-footer">
          <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
          <button id="yes_btn" class="btn btn-danger" data-dismiss="modal">Yes</button>
        </div>
    </div>       
          
          </div>

      </div><!--/row-->

      <hr>

      <footer>
        <p>© Electronix 2013</p>
      </footer>

    </div><!--/.fluid-container-->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
  	<script type="text/javascript">


  	$(document).ready(function() {

      /* hiding initial elements */
      $('div.alert.alert-error').hide();
      $('div.alert.alert-info').hide();
      $('div.alert.alert-success').hide();
      /* hiding initial elements */


      $(document).on('click','button#yes_btn',function(ev){

            var newData = {};

          newData = {
              "_rev": $('form#about_form').first().data('rev'),
              "address" :$('form#about_form input#address_input').first().val(),
              "fax": $('form#about_form input#fax_input').first().val(),
              "phone": $('form#about_form input#phone_input').first().val(),
              "description": $('form#about_form textarea#description_input').first().val(),
              "email": $('form#about_form input#email_input').first().val()
          };

      $.ajax({
      type: "PUT",
      url: 'http://admin:admin@127.0.0.1:5984/electronix_items/about',
      contentType: "application/json; charset=utf-8",
      data: JSON.stringify(newData),
      async: false,
      error: function(err){
        alertSuccess('Updated succesfully!');
      }
      });

      });

      $(document).on('click','form#about_form button#save_btn',function(ev){
        ev.preventDefault();
          $('#sure_modal').modal('toggle');
      });

    $('#sure_modal').modal('hide');

    $(".alert").alert();

    });
  	</script>

</body></html>